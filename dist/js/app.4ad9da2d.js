(function(e){function t(t){for(var a,r,l=t[0],i=t[1],c=t[2],p=0,d=[];p<l.length;p++)r=l[p],s[r]&&d.push(s[r][0]),s[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,l=1;l<n.length;l++){var i=n[l];0!==s[i]&&(a=!1)}a&&(o.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},s={1:0},o=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="https://leftjs.github.io/nasale/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=i;o.push([10,0]),n()})({"0fZW":function(e,t,n){},10:function(e,t,n){e.exports=n("Vtdi")},"2F1T":function(e,t,n){"use strict";var a=n("PcAT"),s=n.n(a);s.a},JKu4:function(e,t,n){},ODcb:function(e,t,n){},OvXH:function(e,t,n){},PcAT:function(e,t,n){},RnhZ:function(e,t,n){var a={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function s(e){var t=o(e);return n(t)}function o(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}s.keys=function(){return Object.keys(a)},s.resolve=o,e.exports=s,s.id="RnhZ"},Vtdi:function(e,t,n){"use strict";n.r(t);n("VRzm");var a=n("Kw5r"),s=(n("9d8Q"),n("XJYT")),o=n.n(s),r=(n("JKu4"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Header",{staticClass:"head"}),n("router-view",{staticClass:"rv"})],1)}),l=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"header-container"},[n("div",{staticClass:"logo-container"},[n("img",{staticClass:"logo",attrs:{src:e.logo,alt:""}}),n("el-menu",{staticClass:"menu",attrs:{"default-active":e.currentMenu,mode:"horizontal",router:!0}},[n("el-menu-item",{attrs:{index:"/"}},[e._v("\n          全部项目\n        ")]),n("el-menu-item",{attrs:{index:"/issue"}},[e._v("\n          发布项目\n        ")]),n("el-menu-item",{attrs:{index:"/wallet"}},[e._v("\n          查看资产\n        ")])],1)],1),n("div",[e.currentAccount?n("span",{staticClass:"account"},[e._v("当前账户: "+e._s(e.currentAccount))]):n("span",{staticClass:"account"},[e._v("请先下载\n        "),n("a",{attrs:{href:"https://github.com/ChengOrangeJu/WebExtensionWallet",target:"__blank"}},[e._v("星云链chrome钱包插件")]),e._v("并导入账号\n      ")])])])])},c=[],u=n("REFk"),p=n.n(u),d={data:function(){return{logo:n("zwU1"),currentMenu:"/"}},computed:{currentAccount:function(){return this.$store.state.account}},created:function(){var e=this;this.currentMenu=this.$route.path,window.postMessage({target:"contentscript",data:{},method:"getAccount"},"*"),window.addEventListener("message",function(t){t.data&&t.data.data&&t.data.data.account&&(console.log(t.data.data.account),e.$store.commit("setAccount",t.data.data.account))})},methods:{}},m=d,f=(n("nNJX"),n("KHd+")),b=Object(f["a"])(m,i,c,!1,null,"712b930a",null),g=b.exports,h={components:{Header:g}},k=h,v=(n("nNx0"),Object(f["a"])(k,r,l,!1,null,null,null)),y=v.exports,j=n("jE9Z"),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[e._l(e.tokens,function(t){return n("Project",{key:t.id,staticClass:"token",attrs:{token:t},on:{buy:e.buy}})}),n("el-dialog",{attrs:{title:e.currentBuyToken.title,visible:e.dialogVisible,width:"50%",name:"test"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("img",{attrs:{src:e.currentBuyToken.logo,alt:""}}),n("p",[e._v(e._s(e.currentBuyToken.name)+" / "+e._s(e.currentBuyToken.symbol))]),n("p",[e._v("项目简介: "+e._s(e.currentBuyToken.desc))]),n("p",[e._v("项目官网:\n      "),n("a",{attrs:{href:e.currentBuyToken.url,target:"__blank"}},[e._v(e._s(e.currentBuyToken.url))])]),n("p",[e._v("众筹时间: "+e._s(e.currentBuyToken.openingTime)+" ~ "+e._s(e.currentBuyToken.endingTime))]),n("p",[e._v("发行总量: "+e._s(e.currentBuyToken.totalSupply)+"万 "+e._s(e.currentBuyToken.symbol))]),n("p",[e._v("众筹总量: "+e._s(e.currentBuyToken.cap)+"万 "+e._s(e.currentBuyToken.symbol))]),n("p",[e._v("已筹数量: "+e._s(e.currentBuyToken.tokenRasised)+"万 "+e._s(e.currentBuyToken.symbol))]),n("p",{staticClass:"line"}),n("p",[n("el-form",{attrs:{model:e.buyInfo,"label-width":"100px",rules:e.buyRules}},[n("el-form-item",{attrs:{label:"购买数量",prop:"amount"}},[n("el-input",{attrs:{type:"number","auto-complete":"off",placeholder:"eg: 1"},model:{value:e.buyInfo.amount,callback:function(t){e.$set(e.buyInfo,"amount",e._n(t))},expression:"buyInfo.amount"}},[n("template",{slot:"append"},[e._v(e._s(e.currentBuyToken.symbol))])],2)],1),n("el-form-item",{attrs:{label:"收款地址",prop:"address"}},[n("el-input",{attrs:{placeholder:"eg: n1TPjVhcMgoZ5h625GC6ba53WF2VZznsUbZ"},model:{value:e.buyInfo.address,callback:function(t){e.$set(e.buyInfo,"address",t)},expression:"buyInfo.address"}})],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.buySubmit}},[e._v("确 定")])],1)])],2)},x=[],T=n("yT7P"),O=(n("a1Th"),n("f3/d"),n("iqUP")),S=n.n(O),C={apiKey:"AIzaSyC4MM32cqb20Rukj-obpQBKlzIvJpxnN0o",authDomain:"nasale-c05fa.firebaseapp.com",databaseURL:"https://nasale-c05fa.firebaseio.com",projectId:"nasale-c05fa",storageBucket:"nasale-c05fa.appspot.com",messagingSenderId:"371491736349"};S.a.initializeApp(C);var z=S.a.database(),B=function(e){var t=z.ref().child("tokens").push().key;return S.a.database().ref("tokens/"+t).set(e),t},D=function(e){var t=S.a.database().ref("tokens");t.on("child_added",e)},A=function(e,t){S.a.database().ref("accounts/".concat(e,"/").concat(t)).set((new Date).valueOf())},Y=function(e,t){var n=S.a.database().ref("accounts/"+e);n.once("value").then(t)},R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{attrs:{shadow:"hover"}},[n("img",{staticClass:"logo",attrs:{src:e.token.logo,alt:""}}),n("div",{staticClass:"content"},[n("span",{staticClass:"title"},[e._v(e._s(e.token.name))]),n("p",{staticClass:"summary"},[e._v(e._s(e.token.desc))]),n("p",{staticClass:"time"},[e._v(e._s(e.token.openingTime)+" ~ "+e._s(e.token.endingTime))]),n("div",{staticClass:"info"},[n("p",[e._v("发行总量: "+e._s(e.token.totalSupply)+"万 "+e._s(e.token.symbol))]),n("p",[e._v("众筹数量: "+e._s(e.token.cap)+"万 "+e._s(e.token.symbol))]),n("p",[e._v("众筹单价: "+e._s(e.token.rate)+"NAS/"+e._s(e.token.symbol))])])]),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{size:"mini",type:"danger",disabled:e.checkInvaild},on:{click:e.emitBuy}},[e._v(e._s(e.checkInvaild?"已过期":"购买"))])],1)])},I=[],M=n("wd/R"),E=n.n(M),$={data:function(){return{}},props:["token"],methods:{emitBuy:function(){this.$emit("buy",this.token)}},computed:{checkInvaild:function(){var e=E()(this.token.openingTime,"YYYY年M月D日"),t=E()(this.token.endingTime,"YYYY年M月D日"),n=E()();return!(!e.isAfter(n)&&!t.isBefore(n))}}},V=$,U=(n("inEW"),Object(f["a"])(V,R,I,!1,null,"1e966c02",null)),N=U.exports,J=n("kB5k"),P=n.n(J),W=(n("pHGr"),n("ls82"),n("MECJ")),q=n("xmWZ"),X=n("qpph"),Z=n("vDqi"),L=n.n(Z),Q=function(){function e(){Object(q["a"])(this,e),this.callbackUrl=p.a.config.mainnetUrl,this.nebpay=new p.a}return Object(X["a"])(e,[{key:"call",value:function(e,t,n,a){var s=this;return new Promise(function(o,r){s.nebpay.call(e,t,n,a,{listener:o})})}},{key:"simulateCall",value:function(e,t,n,a){var s=this;return new Promise(function(o,r){s.nebpay.simulateCall(e,t,n,a,{listener:o})})}}],[{key:"checkState",value:function(t,n,a){var s="https://mainnet.nebulas.io/v1/user/getTransactionReceipt";function o(e){return new Promise(function(t){return setTimeout(t,e)})}L.a.post(s,{hash:t.txhash}).then(function(){var s=Object(W["a"])(regeneratorRuntime.mark(function s(r){var l;return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:if(l=r.data.result.status,1!=l){s.next=5;break}n(r.data.result),s.next=12;break;case 5:if(0!=l){s.next=9;break}fail(r.data.result),s.next=12;break;case 9:return s.next=11,o(5e3);case 11:e.checkState(t,n,a);case 12:case"end":return s.stop()}},s,this)}));return function(e){return s.apply(this,arguments)}}()).catch(function(){var s=Object(W["a"])(regeneratorRuntime.mark(function s(r){return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:return console.log(r),s.next=3,o(5e3);case 3:e.checkState(t,n,a);case 4:case"end":return s.stop()}},s,this)}));return function(e){return s.apply(this,arguments)}}())}}]),e}(),K=n("LvDl"),F=n.n(K),H={name:"home",components:{Project:N},data:function(){return{nebpay:new Q,buyInfo:{amount:"",address:""},buyRules:{amount:[{required:!0,message:"请输入购买数量",trigger:"blur"}],address:[{required:!0,message:"请输入收款地址",trigger:"blur"}]},preTokens:[],dialogVisible:!1,currentBuyToken:{}}},computed:{tokens:function(){var e=this.preTokens.map(function(e){var t=e.id,n=e.name,a=e.symbol,s=e.decimals,o=e.totalSupply,r=e.rate,l=e.cap,i=e.url,c=e.desc,u=e.logo,p=e.openingTime,d=e.endingTime,m=e.contractAddress;return s=new P.a(s),o=new P.a(o)/1e4,l=new P.a(l),r=new P.a(Math.pow(10,s)/Math.pow(10,18)/new P.a(r)).toString(10),l=new P.a(l/Math.pow(10,s)/1e4).toString(10),p=E()(1e3*e.openingTime).format("YYYY年M月D日"),d=E()(1e3*e.endingTime).format("YYYY年M月D日"),{id:t,name:n,symbol:a,totalSupply:o,cap:l,rate:r,logo:u,desc:c,url:i,openingTime:p,endingTime:d,contractAddress:m}});return e=F.a.reverse(e),e}},methods:{buySubmit:function(){var e=this;this.nebpay.simulateCall(this.currentBuyToken.contractAddress,new P.a(this.buyInfo.amount*this.currentBuyToken.rate).toString(),"buyTokens",JSON.stringify([this.buyInfo.address])).then(function(t){if(""===t.execute_err)e.nebpay.call(e.currentBuyToken.contractAddress,new P.a(e.buyInfo.amount*e.currentBuyToken.rate).toString(),"buyTokens",JSON.stringify([e.buyInfo.address])).then(function(t){var n=e.$loading({lock:!0,text:"正在购买代币，请稍候...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e.$message("正在获取支付结果，请不要关闭页面..."),Q.checkState(t,function(t){e.$message.success("购买成功"),A(e.buyInfo.address,e.currentBuyToken.contractAddress),n.close(),e.dialogVisible=!1,e.buyInfo={account:"",address:""}},function(t){e.$message.error("购买失败"),n.close(),console.log(t)})});else{var n="";"Error: too large weiAmount"===t.result?n="剩余众筹总量不足，请修改购买数量":"Error: invalid wallet address."===t.result&&(n="收款地址不正确，请修改收款地址"),e.$message.error(n)}})},buy:function(e){var t=this,n=new Q;n.simulateCall(e.contractAddress,0,"info",JSON.stringify([])).then(function(n){var a=JSON.parse(n.result),s=e.name,o=a.weiRasised,r=new P.a(o/Math.pow(10,18)/e.rate/1e3).toString(10);t.currentBuyToken=Object(T["a"])({},e,{tokenRasised:r,title:"购买 - ".concat(s)}),t.dialogVisible=!0}).catch(function(e){console.error(e),t.$message.error("NAS网络拥堵...")})}},created:function(){var e=this;D(function(t){e.preTokens.push(Object(T["a"])({id:t.key},t.val()))})}},G=H,ee=(n("w8dT"),n("2F1T"),Object(f["a"])(G,w,x,!1,null,"5dbaf93c",null)),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("el-card",{staticStyle:{padding:"50px"},attrs:{"body-style":"width: 100%; padding: 0px;"}},[n("div",{staticClass:"notify"},[n("div",{staticClass:"left"},[n("el-form",{ref:"token",attrs:{model:e.token,rules:e.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"代币名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"eg: NEBULAS(星云币)"},model:{value:e.token.name,callback:function(t){e.$set(e.token,"name",t)},expression:"token.name"}})],1),n("el-form-item",{attrs:{label:"代币符号",prop:"symbol"}},[n("el-input",{attrs:{placeholder:"eg: NAS"},model:{value:e.token.symbol,callback:function(t){e.$set(e.token,"symbol",t)},expression:"token.symbol"}})],1),n("el-form-item",{attrs:{label:"代币位数",prop:"decimals"}},[n("el-input",{attrs:{placeholder:"eg: 18",type:"number"},model:{value:e.token.decimals,callback:function(t){e.$set(e.token,"decimals",e._n(t))},expression:"token.decimals"}})],1),n("el-form-item",{attrs:{label:"代币总量",prop:"totalSupply"}},[n("el-input",{attrs:{placeholder:"eg: 30000000",type:"number"},model:{value:e.token.totalSupply,callback:function(t){e.$set(e.token,"totalSupply",e._n(t))},expression:"token.totalSupply"}},[n("template",{slot:"append"},[e._v(e._s(e.token.symbol?e.token.symbol:"YOUR TOKEN"))])],2)],1),n("el-form-item",{attrs:{label:"众筹目标",prop:"cap"}},[n("el-input",{attrs:{placeholder:"eg: 10",type:"number"},model:{value:e.token.cap,callback:function(t){e.$set(e.token,"cap",e._n(t))},expression:"token.cap"}},[n("template",{slot:"append"},[e._v(e._s(e.token.symbol?e.token.symbol:"YOUR TOKEN"))])],2)],1),n("el-form-item",{attrs:{label:"众筹价格",prop:"rate"}},[n("el-input",{attrs:{placeholder:"eg: 1000",type:"number"},model:{value:e.token.rate,callback:function(t){e.$set(e.token,"rate",e._n(t))},expression:"token.rate"}},[n("template",{slot:"append"},[e._v("NAS/"+e._s(e.token.symbol?e.token.symbol:"YOUR TOKEN"))])],2)],1),n("el-form-item",{staticClass:"crowdTime",attrs:{label:"众筹时间",prop:"crowdTime"}},[n("el-date-picker",{attrs:{type:"daterange","value-format":"timestamp","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.token.crowdTime,callback:function(t){e.$set(e.token,"crowdTime",t)},expression:"token.crowdTime"}})],1),n("el-form-item",{attrs:{label:"代币图标",prop:"logo"}},[n("el-upload",{staticClass:"logo-uploader",attrs:{data:e.uploadData,action:e.qnLocation,"show-file-list":!1,"on-success":e.handleLogoUploadSuccess,"before-upload":e.beforeLogoUpload}},[e.token.logo?n("img",{staticClass:"logo",attrs:{src:e.token.logo}}):n("i",{staticClass:"el-icon-plus logo-uploader-icon"}),n("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.token.logo,callback:function(t){e.$set(e.token,"logo",t)},expression:"token.logo"}})],1)],1),n("el-form-item",{attrs:{label:"代币链接",prop:"url"}},[n("el-input",{attrs:{placeholder:"eg: https://nebulas.io/"},model:{value:e.token.url,callback:function(t){e.$set(e.token,"url",t)},expression:"token.url"}})],1),n("el-form-item",{attrs:{label:"代币描述",prop:"desc"}},[n("el-input",{attrs:{placeholder:"eg: 星云链...",type:"textarea"},model:{value:e.token.desc,callback:function(t){e.$set(e.token,"desc",t)},expression:"token.desc"}})],1),n("el-form-item",{staticStyle:{"text-align":"left"}},[n("el-button",{attrs:{type:"success"},on:{click:e.onSubmit}},[e._v("发布")]),n("el-button",{attrs:{type:"danger"},on:{click:e.reset}},[e._v("重填")])],1)],1)],1),n("div",{staticClass:"right"},[n("p",{staticClass:"title"},[e._v("注意事项")]),n("p",[e._v("1.代币信息一旦创建无法修改，请仔细检查")]),n("p",[e._v("2.用户购买时必须在有效众筹时间")]),n("p",[e._v("3.申请代币的总量全部汇入钱包用户的地址中")]),n("p",[e._v("4.代币图标尽可能保持1:1的图片比例")]),n("p",[e._v("5.代币描述尽量言简意赅")]),n("p",[e._v("6.代币链接请填写项目官网")])])])])],1)},ae=[],se=(n("9VmF"),n("KKXr"),n("Po9p"),"http://p9fmyu9x6.bkt.clouddn.com/"),oe="https://nasale-micro-ruapdchnql.now.sh",re={data:function(){return{timer:null,tokenData:{},uploadData:{},token:{name:"",symbol:"",decimals:"",totalSupply:"",rate:"",cap:"",crowdTime:[],desc:"",logo:"",url:""},rules:{name:[{required:!0,message:"请输入代币名称",trigger:"blur"}],symbol:[{required:!0,message:"请输入代币符号",trigger:"blur"}],decimals:[{required:!0,message:"请输入代币位数",trigger:"blur"}],totalSupply:[{required:!0,message:"请输入代币总量",trigger:"blur"}],rate:[{required:!0,message:"请输入众筹单价",trigger:"blur"}],cap:[{required:!0,message:"请输入众筹目标",trigger:"blur"}],desc:[{required:!0,message:"请输入代币描述",trigger:"blur"}],url:[{required:!0,message:"请输入代币链接",trigger:"blur"},{type:"url",message:"必须是有效的URL",trigger:"blur"}],crowdTime:[{required:!0,message:"请选择众筹起止时间",trigger:"blur"}],logo:[{required:!0,message:"请选择代币图标",trigger:"change"}]}}},computed:{qnLocation:function(){return"http:"===location.protocol?"http://upload-z2.qiniup.com":"https://upload-z2.qiniup.com"},nebpay:function(){return new Q},currentAccount:function(){return this.$store.state.account}},created:function(){var e=this;window.addEventListener("message",function(t){if(t.data&&t.data.data&&t.data.data.txhash){e.$message("请不要离开此页面，静候交易完成！");var n=e.$loading({lock:!0,text:"正在创建代币，请稍候...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a=t.data.data.txhash;Q.checkState(a,function(t){F.a.isEmpty(e.tokenData)||(B(Object(T["a"])({},e.tokenData,{txhash:a.txhash,contractAddress:a.contract_address,owner:e.currentAccount,createdAt:t.timestamp})),A(e.$store.state.account,a.contract_address),e.$message.success("代币创建成功"),e.tokenData={},n.close())},function(){e.$message.error("代币创建失败，请检查"),n.close()})}})},methods:{onSubmit:function(){var e=this;this.$refs["token"].validate(function(t){if(!t)return console.log("error submit!!"),!1;L.a.get("".concat(oe,"/contract")).then(function(t){var n=t.data,a=e.token,s=a.name,o=a.symbol,r=a.decimals,l=a.totalSupply,i=a.rate,c=a.cap,u=a.crowdTime,p=a.url,d=a.desc,m=a.logo,f=parseInt(u[0])/1e3+"",b=parseInt(u[1])/1e3+"";i=new P.a(Math.pow(10,r)/Math.pow(10,18)/i).toString(10),c=new P.a(c*Math.pow(10,r)).toString(10),o=F.a.toUpper(o);var g=[s,o,r,l,i,c,f,b];e.tokenData={name:s,symbol:o,decimals:r,totalSupply:l,rate:i,cap:c,openingTime:f,endingTime:b,url:p,desc:d,logo:m},window.postMessage({target:"contentscript",data:{to:e.currentAccount,value:"0",contract:{source:n,sourceType:"js",args:JSON.stringify(g)}},method:"neb_sendTransaction"},"*")}).catch(function(e){console.log(e)})})},reset:function(){this.token={name:"",symbol:"",decimals:"",totalSupply:"",key:"",logo:""}},handleLogoUploadSuccess:function(e){console.log("upload success"),this.token.logo=se+e.key},beforeLogoUpload:function(e){var t=this,n=e.name.split("."),a=n.splice(n.length-1,1)[0],s=e.type.startsWith("image"),o=e.size/1024/1024<2;return s||this.$message.error("只能上传图片格式"),o||this.$message.error("logo图片大小不能超过 2MB!"),L.a.get("".concat(oe,"/token")).then(function(e){t.uploadData={key:"logo/".concat(n.join("."),"_").concat((new Date).getTime(),".").concat(a),token:e.data}})}}},le=re,ie=(n("tBD8"),n("fVQy"),Object(f["a"])(le,ne,ae,!1,null,"93c7d87c",null)),ce=ie.exports,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",{staticClass:"container",attrs:{"body-style":"width: 100%; padding: 0px;"}},[n("el-input",{attrs:{placeholder:"请输入要查询的钱包地址"},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1),n("div",[n("el-table",{attrs:{data:e.tokens,"header-align":"center",align:"center"}},[n("el-table-column",{attrs:{label:"代币名称",prop:"info.name"}}),n("el-table-column",{attrs:{label:"代币符号",prop:"info.symbol"}}),n("el-table-column",{attrs:{label:"合约地址",prop:"address"}}),n("el-table-column",{attrs:{label:"代币数量",prop:"balance"}})],1)],1)],1)],1)},pe=[],de=(n("rGqo"),n("yt8O"),n("RW0V"),{data:function(){return{account:"",tokens:[],nebpay:new Q}},methods:{search:function(){var e=this,t=this.account;Y(t,function(t){var n=e.$loading({lock:!0,text:"正在查询，请稍候...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e.tokens=[];var a=Object.keys(t.val());_.each(a,function(){var t=Object(W["a"])(regeneratorRuntime.mark(function t(s,o){var r,l,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.nebpay.simulateCall(s,0,"info",JSON.stringify([e.account]));case 2:return r=t.sent,l=JSON.parse(r.result),t.next=6,e.nebpay.simulateCall(s,0,"balanceOf",JSON.stringify([e.account]));case 6:i=t.sent,i=new P.a(JSON.parse(i.result)).dividedBy(Math.pow(10,parseInt(l.decimals))).toString(10),e.tokens.push({address:s,info:l,balance:i}),o===a.length-1&&n.close();case 10:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())})}}}),me=de,fe=(n("xXtW"),Object(f["a"])(me,ue,pe,!1,null,"32ed24aa",null)),be=fe.exports;a["default"].use(j["a"]);var ge=new j["a"]({routes:[{path:"/",name:"home",component:te},{path:"/issue",name:"issue",component:ce},{path:"/wallet",name:"wallet",component:be}]}),he=n("L2JU");a["default"].use(he["a"]);var ke=new he["a"].Store({state:{account:""},mutations:{setAccount:function(e,t){e.account=t}},actions:{}}),ve=n("lIOY");Object(ve["a"])("".concat("https://leftjs.github.io/nasale/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),a["default"].config.productionTip=!1,a["default"].use(o.a),new a["default"]({router:ge,store:ke,render:function(e){return e(y)}}).$mount("#app")},XkYZ:function(e,t,n){},fVQy:function(e,t,n){"use strict";var a=n("OvXH"),s=n.n(a);s.a},inEW:function(e,t,n){"use strict";var a=n("zRk/"),s=n.n(a);s.a},llIZ:function(e,t,n){},nNJX:function(e,t,n){"use strict";var a=n("XkYZ"),s=n.n(a);s.a},nNx0:function(e,t,n){"use strict";var a=n("uWEC"),s=n.n(a);s.a},tBD8:function(e,t,n){"use strict";var a=n("0fZW"),s=n.n(a);s.a},uWEC:function(e,t,n){},w8dT:function(e,t,n){"use strict";var a=n("ODcb"),s=n.n(a);s.a},xXtW:function(e,t,n){"use strict";var a=n("llIZ"),s=n.n(a);s.a},"zRk/":function(e,t,n){},zwU1:function(e,t,n){e.exports=n.p+"img/logo.12ce46f1.png"}});
//# sourceMappingURL=app.4ad9da2d.js.map